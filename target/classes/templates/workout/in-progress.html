<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>運動中</title>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/workout.css}">
</head>
<body>
    <div class="home-container">
        <!-- ヘッダー -->
        <div class="header">
            <h1 class="page-title">運動中</h1>
            <a href="/notifications" class="notification-bell">
                <span class="bell-icon">🔔</span>
                <span th:if="${unreadNotificationCount > 0}" class="notification-badge" th:text="${unreadNotificationCount}">3</span>
            </a>
        </div>
        
        <div class="main-content">
            <div class="workout-progress-card">
                <h2 class="workout-progress-title">運動継続中</h2>
                
                <div class="timer-display">
                    <div id="timer" class="timer">00:00</div>
                    <div class="timer-label">残り時間</div>
                </div>
                
                <div class="progress-info">
                    <h3>運動情報</h3>
                    <p><strong>運動種別:</strong> <span th:text="${workout.exerciseType}">ウォーキング</span></p>
                    <p><strong>開始時刻:</strong> <span th:text="${#temporals.format(workout.startTime, 'HH:mm')}">10:00</span></p>
                    <p><strong>目標時間:</strong> <span th:text="${targetSessionTime}">30</span>分</p>
                </div>
                
                <!-- 目標時間をJavaScriptに渡す -->
                <script th:inline="javascript">
                    window.targetSessionTime = /*[[${targetSessionTime}]]*/ 30;
                    window.startTimeStr = /*[[${#temporals.format(workout.startTime, 'yyyy-MM-dd HH:mm:ss')}]]*/ '';
                    console.log('targetSessionTime:', window.targetSessionTime);
                    console.log('startTimeStr:', window.startTimeStr);
                </script>
                
                <button class="complete-workout-btn" onclick="window.location.href='/workout/complete'">
                    運動完了
                </button>
            </div>
        </div>
    </div>
    
    <!-- ボトムナビゲーション -->
    <nav class="bottom-nav">
        <div class="nav-container">
            <a href="/" class="nav-item">
                <span class="nav-icon">🏠</span>
                <span class="nav-label">ホーム</span>
            </a>
            <a href="/buddy/search" class="nav-item">
                <span class="nav-icon">👥</span>
                <span class="nav-label">バディ追加</span>
            </a>
            <div class="nav-item center-action active">
                <form th:action="@{/workout/start-with-goal}" method="post" style="display: inline;">
                    <button type="submit" class="nav-center-btn">
                        <span class="center-icon">🏃</span>
                    </button>
                </form>
                <span class="nav-label">運動を始める</span>
            </div>
            <a href="/workout/records" class="nav-item">
                <span class="nav-icon">📊</span>
                <span class="nav-label">私の記録</span>
            </a>
            <a href="/goal/set" class="nav-item">
                <span class="nav-icon">📋</span>
                <span class="nav-label">目標設定</span>
            </a>
        </div>
    </nav>
    
    <script th:src="@{/js/workout.js}"></script>
</body>
</html> 